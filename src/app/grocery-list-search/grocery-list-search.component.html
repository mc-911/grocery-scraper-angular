<div class="search-container-header mobile-only">
    <div (click)="returnBtnClickEvent.emit()" class="return-btn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M21 11H6.414l5.293-5.293-1.414-1.414L2.586 12l7.707 7.707 1.414-1.414L6.414 13H21z"></path>
        </svg>
    </div>
</div>
<div class="search-section">
    <div class="search-bar-container">
        <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <path
                d="M10 18a7.952 7.952 0 0 0 4.897-1.688l4.396 4.396 1.414-1.414-4.396-4.396A7.952 7.952 0 0 0 18 10c0-4.411-3.589-8-8-8s-8 3.589-8 8 3.589 8 8 8zm0-14c3.309 0 6 2.691 6 6s-2.691 6-6 6-6-2.691-6-6 2.691-6 6-6z">
            </path>
        </svg>
        <input type="text" class="search-bar" (keyup.enter)="search()" [formControl]="searchQuery" />
    </div>
    <div class="search-options-container">

        <div class="supermarket-btn-container">
            <div class="paknsave-bg supermarket-btn"
                [class]="selectedSupermarkets.includes(this.SupermarketEnum.PAKNSAVE) ? '' : 'disabled' "
                (mouseup)="toggleSupermarket($event, this.SupermarketEnum.PAKNSAVE)">
                <app-packn-save-svg class="price-logo"></app-packn-save-svg>
            </div>
            <div *ngIf="showCountdown" class="countdown-bg supermarket-btn"
                [class]="selectedSupermarkets.includes(this.SupermarketEnum.COUNTDOWN) ? '' : 'disabled' "
                (mouseup)="toggleSupermarket($event, this.SupermarketEnum.COUNTDOWN)">
                <app-countdown-svg class="price-logo"></app-countdown-svg>
            </div>
            <div class="new_world-bg supermarket-btn"
                [class]="selectedSupermarkets.includes(this.SupermarketEnum.NEW_WORLD) ? '' : 'disabled' "
                (mouseup)="toggleSupermarket($event, this.SupermarketEnum.NEW_WORLD)">
                <app-new-world-svg class="price-logo"></app-new-world-svg>
            </div>
        </div>
        <div class="sort-by-category-container">
            <app-dropdown-checkbox (selectOptionEvent)="selectCategory($event)" [options]="categories"
                [selectedOptions]="this.selectedCategoriesIndexArray" [label]="'Categories'"></app-dropdown-checkbox>
            <app-dropdown (selectOptionEvent)="selectSort($event)" [options]="sortingOptions"
                [selectedOption]="selectedSortIndex"></app-dropdown>
        </div>
    </div>
</div>
<ng-container [ngSwitch]="selectedGroceryListItem.searchState">
    <div *ngSwitchCase="SearchStateEnum.NO_SEARCH" class="enter-query-message">Enter your search query for
        "{{selectedGroceryListItem!.name}}"
    </div>
    <div *ngSwitchCase="SearchStateEnum.LOADING" class="spinner-container">
        <svg class="spin" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path
                d="M12 22c5.421 0 10-4.579 10-10h-2c0 4.337-3.663 8-8 8s-8-3.663-8-8c0-4.336 3.663-8 8-8V2C6.579 2 2 6.58 2 12c0 5.421 4.579 10 10 10z">
            </path>
        </svg>
    </div>
    <div *ngSwitchCase="SearchStateEnum.SEARCHED" class="results-container">
        <div *ngIf="selectedSupermarkets.includes(SupermarketEnum.PAKNSAVE) && selectedGroceryListItem.results"
            class="supermarket-container">
            <div class="supermarket-name">PAK'nSAVE</div>
            <div *ngIf="selectedGroceryListItem.results.PAKNSAVE && selectedGroceryListItem.results.PAKNSAVE.length"
                class="supermarket-card-container">
                <app-supermarket-item-card *ngFor="let item of selectedGroceryListItem.results.PAKNSAVE"
                    [selected]="isSelectedGroceryListInfo(item.productCode, item.supermarket)"
                    (selectedGroceryListItemEvent)="selectGroceryListItemInfo($event)" [data]="item" />
            </div>
            <div *ngIf="selectedGroceryListItem!.results.PAKNSAVE?.length == 0;" class="noResultsMessage">
                No Results</div>
        </div>
        <div *ngIf="selectedSupermarkets.includes(SupermarketEnum.COUNTDOWN) && selectedGroceryListItem.results"
            class="supermarket-container">
            <div class="supermarket-name">Countdown</div>
            <div *ngIf="selectedGroceryListItem.results.COUNTDOWN && selectedGroceryListItem.results.COUNTDOWN.length"
                class="supermarket-card-container">
                <app-supermarket-item-card *ngFor="let item of selectedGroceryListItem.results.COUNTDOWN"
                    [selected]="isSelectedGroceryListInfo(item.productCode, item.supermarket)"
                    (selectedGroceryListItemEvent)="selectGroceryListItemInfo($event)" [data]="item" />
            </div>
            <div *ngIf="selectedGroceryListItem!.results.COUNTDOWN?.length == 0;" class="noResultsMessage">
                No Results</div>
        </div>
        <div *ngIf="selectedSupermarkets.includes(SupermarketEnum.NEW_WORLD) && selectedGroceryListItem.results"
            class="supermarket-container">
            <div class="supermarket-name">New World</div>
            <div *ngIf="selectedGroceryListItem.results.NEW_WORLD && selectedGroceryListItem.results.NEW_WORLD.length"
                class="supermarket-card-container">
                <app-supermarket-item-card *ngFor="let item of selectedGroceryListItem.results.NEW_WORLD"
                    [selected]="isSelectedGroceryListInfo(item.productCode, item.supermarket)"
                    (selectedGroceryListItemEvent)="selectGroceryListItemInfo($event)" [data]="item" />
            </div>
            <div *ngIf="selectedGroceryListItem!.results.NEW_WORLD?.length == 0;" class="noResultsMessage">
                No Results</div>
        </div>
    </div>
</ng-container>
<dialog #setQuantityDialog>
    <div class="menuContainer">
        <div class="menuHeader">
            <div class="return-btn absolute" (click)="toggleSetQuantityDialog()">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M21 11H6.414l5.293-5.293-1.414-1.414L2.586 12l7.707 7.707 1.414-1.414L6.414 13H21z">
                    </path>
                </svg>
            </div>
            <div class="menu-header-name">
                Quantity
            </div>
        </div>
        <div class="setQuantityInputSection">
            <div class="input-container">
                <label>Quantity</label>
                <input [formControl]="newGroceryListItemInfoQuantity" type="number"
                    (keydown.enter)="addNewGroceryListItemInfo()" />
            </div>
        </div>
        <div class="tertiary-bg btn" (click)="addNewGroceryListItemInfo()">
            Add
        </div>
    </div>
</dialog>